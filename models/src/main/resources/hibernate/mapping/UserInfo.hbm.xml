<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

    <class name="za.co.thecompany.mapping.UserInfo" table="user_info" schema="prodo_data">
        <id name="userId" column="user_id"/>
        <property name="username" column="username"/>
        <property name="userPassword" column="user_password"/>
        <property name="firstName" column="first_name"/>
        <property name="lastName" column="last_name"/>
        <property name="userRole" column="user_role"/>
        <many-to-one name="profileStatusByProfileStatusId" class="za.co.thecompany.mapping.ProfileStatus">
            <column name="profile_status_id"/>
        </many-to-one>
        <set name="portfolios" inverse="true">
            <key>
                <column name="user_id"/>
            </key>
            <one-to-many not-found="ignore" class="za.co.thecompany.mapping.Portfolio"/>
        </set>
        <set name="posts" inverse="true">
            <key>
                <column name="user_id"/>
            </key>
            <one-to-many not-found="ignore" class="za.co.thecompany.mapping.Post"/>
        </set>
    </class>

    <sql-query name="FIND_USER_BY_USERNAME">
        <return alias="userInfo" class="za.co.thecompany.mapping.UserInfo"/>
            <![CDATA[
                SELECT * FROM user_info ui where ui.username = :username
            ]]>
    </sql-query>
</hibernate-mapping>